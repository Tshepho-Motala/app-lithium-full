<div class="row v-reset-row ">
    <form>
        <div class="modal-body" id="modal-body">
            <div class="col-xs-12" ng-if="!controller.start && (controller.uploading || controller.waitForProcessingStart || controller.done || controller.failed) && controller.model.view === 'action'">
                <div class="progress progress-striped active" style="margin-top: 10px">
                    <div class="progress-bar {{controller.done ? 'bg-green' : controller.failed ? 'bg-red' : ''}}" role="progressbar" aria-valuenow="100"
                         aria-valuemin="0" aria-valuemax="100" style="width:100%">
                        <span ng-if="controller.uploading">{{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.CASH_BONUSES.PROGRESS_BAR.UPLOADING_LABEL' | translate}}</span>
                        <span ng-if="controller.waitForProcessingStart">{{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.CASH_BONUSES.PROGRESS_BAR.PROCESSING_LABEL' | translate}}</span>
                        <span ng-if="controller.done">{{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.CASH_BONUSES.PROGRESS_BAR.ACTIONS_SUCCESSFULLY_APPLIED' | translate}}</span>
                        <span ng-if="controller.failed">{{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.CASH_BONUSES.PROGRESS_BAR.NO_VALID_PLAYERS' | translate}}</span>
                    </div>
                </div>
            </div>
            <div class="row v-reset-row bottom-space-10">
                <buttonbar>
                    <button-back ng-if="controller.model.view === 'action'" ng-click="controller.back()"></button-back>
                    <button-add ng-if="controller.model.view === 'history'" ng-click="controller.addAction()"></button-add>
                    <button-refresh ng-if="controller.model.view === 'history'" class="pull-right" ng-click="controller.refreshHistoryTable()"></button-refresh>
                </buttonbar>
            </div>
            <div class="row v-reset-row" ng-if="controller.model.view === 'history'">
                    <dt class="table table-sm table-responsive" table="controller.userMassActionHistoryTable"/>
            </div>
            <div class="row v-reset-row" ng-if="controller.model.view === 'action'">
                <div class="col-xs-12">
                    <formly-form model="controller.model" fields="controller.fields" form="controller.form" options="controller.options"></formly-form>
                </div>
                <div class="col-xs-12">
                    <div class="col-xs-2">
                        {{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.GENERIC_BONUSES.FIELDS.UPLOAD_TYPE.LABEL' | translate}}
                    </div>
                    <div class="form-check form-check-inline col-xs-2">
                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1" checked>
                        <label class="form-check-label" for="flexRadioDefault1">
                            {{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.GENERIC_BONUSES.FIELDS.UPLOAD_TYPE.CSV_FILE' | translate}}
                        </label>
                    </div>
                    <div class="form-check form-check-inline col-xs-2" ng-disabled="true">
                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" disabled>
                        <label class="form-check-label" for="flexRadioDefault2">
                            {{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.GENERIC_BONUSES.FIELDS.UPLOAD_TYPE.SEGMENT' | translate}}
                        </label>
                    </div>
                </div>
                <br>
                <div class="col-xs-12">
                    <div class="col-xs-1">
                        <span class="text-muted"  tooltip title="{{'UI_NETWORK_ADMIN.BONUSES.GENERIC_BONUSES.CASH_BONUSES.TOOLTIP' | translate}}"><i class="fa fa-question-circle" aria-hidden="true"></i></span>
                    </div>
                    <div class="col-xs-2" style="padding: 0px;">
                        <input ng-disabled="controller.model.bonusCode == null" type="file" id="files" class="hidden" ngf-select="controller.selectFile($file)"/>
                        <label for="files" class="btn btn-default">{{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.GENERIC_BONUSES.FIELDS.CHOOSE_FILE.LABEL' | translate}}</label>
                    </div>
                    <div class="col-xs-1" style="padding: 0px;">
                        <label ng-if="controller.model.fileName" class="text-blue" style="margin-top: 10px">{{controller.model.fileName}}</label>
                    </div>
                    <div class="col-xs-4" style="padding: 0px;">
                        <div ng-if="!controller.start && controller.model.progress && controller.checking && !controller.processing && !controller.done" class="progress" style="margin-top: 10px">
                            <div class="progress-bar" role="progressbar" aria-valuenow="{{controller.model.progress}}"
                                 aria-valuemin="0" aria-valuemax="100" style="width:{{controller.model.progress}}%">
                                <span>{{(controller.model.progress === undefined || controller.model.progress === null)? 0: controller.model.progress|number:2}}%</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12">
                    <div>
                        <input type="checkbox" id="multiple-bonuses" name="multiple-bonuses" ng-model="controller.model.allowDuplicates" ng-disabled="controller.processing">
                        <label for="multiple-bonuses">{{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.GENERIC_BONUSES.FIELDS.MULTIPLE_BONUSES.LABEL' | translate}}</label>
                    </div>
                </div>
                <div class="box-body table-responsive" ng-if="!controller.start && !controller.uploading && (controller.checked || controller.processing || controller.done || controller.failed) && controller.model.action.id != -1">
                    <dt class="table table-sm table-responsive" table="controller.checkedTable"/>
                </div>
                <div ng-if="!controller.start && !controller.uploading && (controller.checked || controller.processing || controller.done || controller.failed) && controller.model.action.id != -1">
                    <div class="col-xs-12">
                        <label class="text-green">{{controller.model.uploadSummary.existingPlayers}}&nbsp;{{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.GENERIC_BONUSES.SUMMARY.EXISTING_PLAYERS' | translate}}</label>
                    </div>
                    <div class="col-xs-12">
                        <label class="text-red">{{controller.model.uploadSummary.undefinedPlayers}}&nbsp;{{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.GENERIC_BONUSES.SUMMARY.UNDEFINED_PLAYERS' | translate}}</label>
                    </div>
                    <div class="col-xs-12">
                        <label class="text-orange">{{controller.model.uploadSummary.duplicatePlayers}}&nbsp;{{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.GENERIC_BONUSES.SUMMARY.DUPLICATED_PLAYERS' | translate}}</label>
                    </div>
                </div>
                <div class="col-xs-12" ng-if="controller.processing || controller.done">
                    <div ng-if="controller.model.progress" class="progress" style="margin-top: 10px">
                        <div class="progress-bar" role="progressbar" aria-valuenow="{{controller.model.progress}}"
                             aria-valuemin="0" aria-valuemax="100" style="width:{{controller.model.progress}}%">
                            <span>{{(controller.model.progress === undefined || controller.model.progress === null) ? 0 : controller.model.progress | number : 2}}%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer" ng-if="controller.processBtn && controller.model.view === 'action'">
            <button class="btn btn-success" ng-click="controller.submit()">{{'UI_NETWORK_ADMIN.BONUSES.GRANT_MASS.CASH_BONUSES.BUTTONS.PROCESS' | translate}}</button>
        </div>
    </form>
</div>

