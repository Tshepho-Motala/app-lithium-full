<div class="container-fluid">
	<div class="card card-block" style="margin-bottom: 10px;" ng-init="">
		<div class="d-flex justify-content-start">
			<div class="p-2 mr-auto" style="width: 50%;">
				<span class="title">
					<!--					{{ "UI_NETWORK_ADMIN.USERMISSIONS.LIST.TITLE" | translate }}-->
					Promotions History
					<!--					TODO: Replace appropriate translation-->
				</span>
				<span class="description">
					<!--					{{ "UI_NETWORK_ADMIN.USERMISSIONS.LIST.DESCRIPTION" | translate }}-->
					Searchable list of promotions that players have completed or currently busy with.
					<!--					TODO: Replace appropriate translation-->
				</span>
			</div>
			<div class="ml-auto p-2 text-right" style="width: 50%;">
				<div style="margin-bottom:5px;">
					<span ng-repeat="domain in controller.selectedDomains">
						<span style="padding:5px; margin-right: 2px;" class="label label-primary">&nbsp;{{ domain | uppercase }}&nbsp;</span>
					</span>
				</div>
			</div>
		</div>
	</div>

	<div class="row v-reset-row ">
		<div class="col-xs-12">
			<div class="pull-right">
				<div class="btn-group" uib-dropdown>
					<button id="dropdown-domain" type="button" class="btn btn-default" uib-dropdown-toggle>
						{{ controller.selectedDomainsDisplay }} <span class="caret"></span>
					</button>
					<ul class="dropdown-menu dropdown-menu-right px-2 pb-2" uib-dropdown-menu role="menu" aria-labelledby="dropdown-type">
						<li role="menuitem"><a ng-click="controller.domainSelectAll()">All Domains</a></li>
						<li class="divider"></li>
						<li class="domain-select" role="menuitem" ng-repeat="domain in controller.domains | unique : 'name'">
							<input ng-model="domain.selected" type="checkbox" title="DOMAIN" ng-change="controller.domainSelect()"/>
								{{domain.name}}
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	
	<br/>
	
	<div class="row v-reset-row ">
		<div class="col-xs-12">
			<div class="card card-block">
				<div class="" style="margin-bottom: 10px;">
					<div uib-collapse="controller.legendCollapsed">
						<div class="col-md-4 col-xs-12">
							<label>User</label>
							<div class="input-group">
								<input type="text"
									ng-model="controller.selectedUser"
									placeholder="search player (domain/username)"
									uib-typeahead="user.domain.name+'/'+user.username for user in controller.searchUsers($viewValue)"
									typeahead-loading="loadingLocations"
									typeahead-no-results="noResults"
									typeahead-min-length="2"
									typeahead-show-hint="true"
									typeahead-wait-ms="500"
									typeahead-editable="false"
									typeahead-on-select="controller.selectedUser = $item;"
									class="form-control"/>
								<div class="input-group-btn">
									<button type="button" class="btn btn-default" ng-click="controller.resetUserSearch()"><i class="fa fa-remove"></i></button>
								</div>
							</div>
							<div ng-show="loadingLocations" class="overlay">
								<i class="fa fa-refresh fa-spin"></i>
							</div>
							<div ng-show="noResults" class="form-group has-error">
								<span class="help-block"><i class="fa fa-remove"></i>&nbsp;No Results Found</span>
							</div>
						</div>
						
						<formly-form model="controller.model" fields="controller.fields" form="controller.form" options="controller.options">
						</formly-form>
						<div class="col-md-6 col-xs-12">
							<div class="form-group">
								<div>
									<label class="control-label">{{ "UI_NETWORK_ADMIN.USERMISSIONS.FILTER.FIELDS.ACTIVE.NAME" | translate}}</label>
								</div>
								<div class="btn-group">
									<label class="btn btn-default"
										ng-class="(controller.active === 1)?'active':''"
										ng-model="controller.active" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">
										<i ng-class="(controller.active === 1)?'fa fa-check-square-o':'fa fa-square-o'"></i>
										<span>{{ "UI_NETWORK_ADMIN.USERMISSIONS.FILTER.FIELDS.ACTIVE.DESCRIPTION" | translate}}</span></label>
								</div>
							</div>
						</div>
						<div class="col-md-6 col-xs-12">
							<div class="form-group pull-right">
								<div>
									<label class="control-label">{{ "UI_NETWORK_ADMIN.USERMISSIONS.FILTER.FIELDS.CURRENT.NAME" | translate}}</label>
								</div>
								<div class="btn-group">
									<label class="btn btn-default"
										ng-class="(controller.current === 1 || controller.current === true)?'active':''"
										ng-model="controller.current" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">
										<i ng-class="(controller.current === 1)?'fa fa-check-square-o':'fa fa-square-o'"></i>
										<span>{{ "UI_NETWORK_ADMIN.USERMISSIONS.FILTER.FIELDS.CURRENT.DESCRIPTION" | translate}}</span></label>
								</div>
							</div>
						</div>
						<div class="col-xs-12">
							<div class="flex-row pull-right">
								<button-clear ng-click="controller.resetFilter(true)"></button-clear>
								<button-filter ng-click="controller.applyFilter(true)"></button-filter>
							</div>
						</div>
					</div>
					<div class="collapse" uib-collapse="!controller.legendCollapsed">
						<div align="center">
							<button-filter class="pull-left" ng-click="controller.toggleLegendCollapse()"></button-filter>
							<button-refresh class="pull-right" ng-click="controller.applyFilter(false)"></button-refresh>
							<button-clear class="pull-right" ng-click="controller.resetFilter(false)"></button-clear>
						</div>
					</div>
				</div>
				<dt class="no-padding table-responsive" table="controller.userMissionsTable"/>
			</div>
		</div>
	</div>
</div>