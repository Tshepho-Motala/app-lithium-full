<div class="container-fluid">
	<div class="box box-primary box-widget">
		<div class="box-body box-profile">
			<div class="user-block">
				<div class="pull-right">
					<span class="label">&nbsp;</span>
					<br/>
					<span style="line-height:inherit;" class="label label-primary">{{controller.model.domain.name|uppercase}}</span>
				</div>
				<h4 style="font-weight: bold;">
					Ledger: ({{controller.model.name}})<br/>
					<small><span class="label" ng-class="{'label-success': controller.model.valid,
														  'label-danger': !controller.model.valid}">
								{{(controller.model.valid)? 'VALID': 'INVALID'}}
							</span></small>
				</h4>
				<small ng-if="controller.model.description">({{controller.model.description}})</small>
			</div>
		</div>
	</div>
	
	<buttonbar>
		<button-back ui-sref="dashboard.gogamegames.ledgers"></button-back>
		<button-refresh ng-click="controller.refresh()"></button-refresh>
	</buttonbar>
	
	<br/><br/>
	
	<div class="row v-reset-row ">
		<div ng-class="{'col-xs-6': controller.ledgerAnalysis.blocks > 0, 'col-xs-12': controller.ledgerAnalysis.blocks === 0}">
			<div class="info-box bg-aqua">
				<span class="info-box-icon"><i class="fa fa-th"></i></span>
				
				<div class="info-box-content">
					<span class="info-box-text">BLOCKS</span>
					<span class="info-box-number">{{controller.ledgerAnalysis.blocks}}</span>
				</div>
			</div>
		</div>
		<div ng-if="controller.ledgerAnalysis.blocks > 0" class="col-xs-6">
			<div class="info-box bg-green">
				<span class="info-box-icon"><i class="fa fa-file-text-o"></i></span>
				<div class="info-box-content">
					<span class="info-box-text">ENTRIES LEFT</span>
					<span class="info-box-number">{{controller.countNew}} of {{controller.countNew+controller.countSeen+controller.countTaken}}</span>
				</div>
			</div>
		</div>
	</div>
	
	<div ng-if="controller.ledgerAnalysis.blocks > 0" class="row v-reset-row ">
		<div class="col-md-3 col-sm-6 col-xs-12">
			<div class="info-box">
				<span class="info-box-icon bg-aqua">
					<i class="fa fa-play"></i>
				</span>
				<div class="info-box-content">
					<span class="info-box-text">Total Play</span>
					<span class="info-box-number">{{controller.ledgerAnalysis.totalPlayCents|cents}}</span>
				</div>
			</div>
		</div>
		
		<div class="col-md-3 col-sm-6 col-xs-12">
			<div class="info-box">
				<span class="info-box-icon bg-red"><i class="fa fa-dollar"></i></span>
				<div class="info-box-content">
					<span class="info-box-text">Win</span> 
					<span class="info-box-number">{{controller.ledgerAnalysis.winCents|cents}}</span>
				</div>
			</div>
		</div>

		<!-- fix for small devices only -->
		<div class="clearfix visible-sm-block"></div>

		<div class="col-md-3 col-sm-6 col-xs-12">
			<div class="info-box">
				<span class="info-box-icon bg-green"><i class="fa fa-gamepad"></i></span>
				<div class="info-box-content">
					<span class="info-box-text">No. Wins</span>
					<span class="info-box-number">{{controller.ledgerAnalysis.wins}}</span>
				</div>
			</div>
		</div>
		
		<div class="col-md-3 col-sm-6 col-xs-12">
			<div class="info-box">
				<span class="info-box-icon bg-yellow"><i class="fa fa-repeat"></i></span>
				
				<div class="info-box-content">
					<span class="info-box-text">Respins</span>
					<span class="info-box-number">{{controller.ledgerAnalysis.respins}}</span>
				</div>
			</div>
		</div>
	</div>
	
	<div ng-if="controller.ledgerAnalysis.blocks > 0" class="row v-reset-row ">
		<div class="col-xs-12">
			<div class="info-box" ng-class="{'bg-red': controller.ledgerAnalysis.rtpPercentage > 100, 'bg-green': controller.ledgerAnalysis.rtpPercentage < 100}">
				<span class="info-box-icon"><i class="fa fa-info-circle"></i></span>
				
				<div class="info-box-content">
					<span class="info-box-text">RTP</span>
					<span class="info-box-number">{{controller.ledgerAnalysis.rtpPercentage}}%</span>
					<div class="progress">
 						<div class="progress-bar" style="width: {{controller.ledgerAnalysis.rtpPercentage}}%"></div>
					</div>
					<span class="progress-description">
						{{controller.ledgerAnalysis.winCents|cents}} of {{controller.ledgerAnalysis.totalPlayCents|cents}}
					</span>
				</div>
			</div>
		</div>
	</div>
	
	<div ng-if="controller.ledgerAnalysis.blocks > 0" class="row v-reset-row ">
		<div class="col-md-4 col-sm-6 col-xs-12">
			<div class="info-box">
				<span class="info-box-icon bg-aqua">
					<i class="fa fa-star-o"></i>
				</span>
				<div class="info-box-content">
					<span class="info-box-text">NEW</span>
					<span class="info-box-number">{{controller.countNew}}</span>
				</div>
			</div>
		</div>
		
		<div class="col-md-4 col-sm-6 col-xs-12">
			<div class="info-box">
				<span class="info-box-icon bg-yellow">
					<i class="fa fa-star-half-o"></i>
				</span>
				<div class="info-box-content">
					<span class="info-box-text">SEEN</span>
					<span class="info-box-number">{{controller.countSeen}}</span>
				</div>
			</div>
		</div>
		
		<div class="col-md-4 col-sm-6 col-xs-12">
			<div class="info-box">
				<span class="info-box-icon bg-green">
					<i class="fa fa-star"></i>
				</span>
				<div class="info-box-content">
					<span class="info-box-text">TAKEN</span>
					<span class="info-box-number">{{controller.countTaken}}</span>
				</div>
			</div>
		</div>
	</div>
	
	<div class="row v-reset-row ">
		<div class="col-xs-12">
			<div class="box box-default">
				<div class="box-header with-border">
					<h3 class="box-title">Information</h3>
					<div ng-if="controller.ledgerAnalysis.blocks === 0" class="box-tools pull-right">
						<button type="button" class="btn btn-box-tool" ng-click="controller.changeInfo()">
							<span><i class="fa fa-gear"></i> {{"GLOBAL.ACTION.CHANGE"|translate}} </span>
						</button>
					</div>
				</div>
				<div class="box-body">
					<table class="table table-hover table-striped nowrap" cellspacing="0" width="100%">
						<tbody>
							<tr>
								<th style="width: 20%;">Domain</th>
								<td>{{controller.model.domain.name}}</td>
							</tr><tr>
								<th>Name</th>
								<td>{{controller.model.name}}</td>
							</tr><tr>
								<th>Validity</th>
								<td>
									<span class="label" ng-class="{'label-success': controller.model.valid,
														  'label-danger': !controller.model.valid}">
										{{(controller.model.valid)? 'VALID': 'INVALID'}}
									</span>
								</td>
							</tr><tr>
								<th>Description</th>
								<td>{{controller.model.description}}</td>
							</tr><tr>
								<th>Currency</th>
								<td>{{controller.model.currencyCode}}</td>
							</tr><tr>
								<th>Total Play</th>
								<td>{{controller.model.totalPlay|currency}}</td>
							</tr><tr>
								<th>Engine</th>
								<td>{{controller.model.engine.id}}</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
	
	<div class="row v-reset-row ">
		<div class="col-xs-12">
			<div class="box box-default">
				<div class="box-header with-border">
					<h3 class="box-title">Ledger Blocks</h3>
				</div>
				<div class="box-body no-padding table-responsive">
					<dt table="controller.ledgerBlocksTable"/>
				</div>
			</div>
		</div>
	</div>
</div>