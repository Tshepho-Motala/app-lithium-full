<div class="modal-header">
	<h3 class="modal-title" id="modal-title">{{ 'UI_NETWORK_ADMIN.GROUPS.ROLES.HEADERS.ROLESMANAGE' | translate }}
		<div class="pull-right">
			<button type="button" class="btn btn-default" ng-click="controller.cancel()">
				<i class="fa fa-times"></i>
			</button>
		</div>
	</h3>
</div>
<div class="modal-body" id="modal-body">
	<formly-form model="controller.grdbasic" fields="controller.fields" options="controller.options"></formly-form>
	<div class="row v-reset-row " ng-if="((controller.roles.length === 0) && (controller.modalresult.domainid) && (!controller.showSearch))">
		<div class="col-md-12" align="center">
			<div class="box box-danger" style="text-align: center;">
				<div class="box-header with-border">
					<h3 class="box-title">
						{{ 'UI_NETWORK_ADMIN.GROUPS.ROLES.NOROLES' | translate }}
					</h3>
				</div>
			</div>
		</div>
	</div>
	<div ng-if="controller.showSearch" class="box-tools pull-right">
		<div class="input-group input-group-sm pull-right" style="width: 250px;">
			<input type="text" name="add_search" ng-model="controller.filter.key"
				class="form-control pull-right" placeholder="{{ 'GLOBAL.INPUT.SEARCHDYNAMIC' | translate }}">
			<div class="input-group-btn">
				<button type="button" class="btn btn-default" style="background-color: #d2d6de;">
					<i class="fa fa-search"></i>
				</button>
			</div>
		</div>
	</div>
	<div class="box-header with-border" ng-if="(controller.filter.key !== undefined && controller.filter.key !== '')">
		<i class="fa fa-search"></i>
		<h3 class="box-title">
			Search Results : ({{filtered.length}} found)
		</h3>
	</div>
	<div class="row v-reset-row " ng-if="controller.roles" ng-repeat="role in controller.roles | filter:{name:controller.filter.key, role:controller.filter.key, description:controller.filter.key} as filtered">
		<div class="col-md-12">
			<div class="box box-solid" style="margin-bottom: 3px;">
			<!-- domain.category box-header -->
			<div class="box-header with-border" ng-if="((role.category.id != controller.roles[$index-1].category.id) && (controller.filter.key === undefined || controller.filter.key === ''))">
				<i class="fa fa-tag"></i>
				<h3 class="box-title">
					{{role.category.name}}
					<small>{{role.category.description}}</small>
				</h3>
				<div class="pull-right">
<!-- 					Applies to&nbsp;:&nbsp; -->
					<label style="font-weight: normal;">this domain&nbsp;
						<checkbox class="btn-primary" ng-model="roles.self[role.category.id]" ng-change="controller.changeCatSelfApplied(role.category.id, roles.self[role.category.id])"></checkbox>
					</label>&nbsp;
					<label style="font-weight: normal;">sub domains&nbsp;
						<checkbox class="btn-primary" ng-model="roles.child[role.category.id]" ng-change="controller.changeCatDescending(role.category.id, roles.child[role.category.id])"></checkbox>
					</label>
				</div>
			</div>
			<!-- domain.category box-header end-->
			<!-- domain.category box-body -->
			<div class="box-body no-padding">
				<!-- category.grd table -->
				<table class="table table-condensed table-hover" style="border-bottom-width: 5px;border-bottom-color: #777;">
				<tbody>
				<tr style="background-color: #f4f4f4;vertical-align: middle;">
					<td width="60%">{{role.name}}&nbsp;({{role.role}})<br/>{{role.description}}</td>
					<td style="display: table-cell;vertical-align: middle;text-align: right;">
						Applies to&nbsp;:&nbsp;
						<label style="font-weight: normal;">this domain&nbsp;
							<checkbox class="btn" ng-model="role.self"></checkbox>
						</label>&nbsp;
						<label style="font-weight: normal;">sub domains&nbsp;
							<checkbox class="" ng-model="role.child"></checkbox>
						</label>
					</td>
				</tr>
				</tbody>
				</table>
				<!-- category.grd table end -->
			</div>
		</div>
	</div>
</div>
<div class="modal-footer">
	<button class="btn btn-primary" type="button" ng-click="controller.addRoles()">OK</button>
	<button class="btn btn-warning" type="button" ng-click="controller.cancel()">Cancel</button>
</div>