= Alert Endpoints

== Alert Wallet Callback Notification

include::plantuml/endpoint-mappings-alertwalletcallbacknotification-sequence.puml[]

GGO: `/v1.0/alertwalletcallbacknotification` +
Lithium: N/A

NOTE: Implemented in link:https://gitlab.com/playsafe/lithium/app-lithium-full/-/blob/develop/service-casino/service-casino-provider-iforium/src/main/java/lithium/service/casino/provider/iforium/controller/AlertsController.java[lithium.service.casino.provider.iforium.controller.AlertsController]

=== Request

[options="header", cols="^.<20m,.<30,.<10,.<20m,.<20e"]
|===
|GGO Parameter|Description|Type|Lithium Parameter|Comments

| Authorization +
_(header)_
| Basic Auth.
| String
| N/A
| Validate against config

| PlatformKey
| The platform key associated with the caller.
| String(4)
| N/A
| Validate against config

| GatewaySessionToken
| The Player’s current Gateway Session Token as returned from the Redeem Session Token method. This should be validated as active on Place Bet only.
| String(100)
| sessionKey
|

| Timestamp
| A UTC Timestamp for the request.
| Date
|
|

| Sequence
| A unique sequence number generated by the Gameflex Operator Wallet API integration.
| String(50)
| N/A
| Ignore

| OperatorAccountID
| Unique identifier for the Player in the Operator Platform.
| String(50)
|
|

| Source
| Defines the source that generated the Alert:
OperatorWallet is returned when the Alert was generated by the Operator Wallet returning an Alert on either Redeem Session Token, Place Bet, Award Winnings or End Game Round methods.
Gameflex is returned when the Alert was generated by the Gameflex Regulatory Framework.
| String
|
|

| AlertActionID
| Unique identifier for the Alert Wallet Callback Notification.
| String(50)
|
|

| OperatorAlertActionReference
| The value specified by the Operator when generating an Alert as defined in section 2.1.4.3. This will be null if the Source is Gameflex.
| String (50)
|
|

| OperatorAlertReference
| The value specified by the Operator when generating an Alert as defined in section 2.1.4.3. This will be null if the Source is Gameflex.
| String (50)
|
|

| GamingRegulatorCode
| Game Regulator configured for the Brand. Allows the Operator to determine the appropriate cause for the Operator Wallet Alert Notification. See “Iforium Common Reference Data” document.
| String (10)
|
|


| Type
| The Alert type specified on the Redeem Session Token, Place Bet, Award Winnings or End Game Round methods or by via the Gameflex Regulatory Framework.
| String (50)
|
|


| Method
| The Alert Action method specified on the Redeem Session Token, Place Bet, Award Winnings or End Game Round methods or by via the Gameflex Regulatory Framework.
| String (50)
|
|


| Data
| The Alert Action data specified on the Redeem Session Token, Place Bet, Award Winnings or End Game Round methods or by via the Gameflex Regulatory Framework.
| String (50)
|
|

|===

.Example Request:
[source,json]
----
{
    PlatformKey: "L100",
    Sequence: "51196-3a6b-4795-8653-1a4c2a6be08e",
    Timestamp: "2020-09-14T14:30:06.2794721Z",
    GatewaySessionToken: "cc146974-b210-482e-820b-771b01d15227",
    OperatorAccountID: "TestOperatorID",
    Source: "OperatorWallet",
    AlertActionID: "xa-82b3-11eb-8dcd-0242ac130003",
    OperatorAlertActionReference: "AA1234C",
    OperatorAlertReference: "AA1234",
    GamingRegulatorCode: "GamingRegulatorCode",
    Type: "AlertType",
    Method: "AlertActionMethod",
    Data: "AlertActionData"
}
----

=== Response

[options="header", cols="^.<20m,.<30,.<10,.<20m,.<20e"]
|===
|GGO Parameter|Description|Type|Lithium Parameter|Comments

| ErrorCode
| Error Code.
| Integer
|
| [0, -1, -5, -6]

|===

.Example Response:
[source,json]
----
{
  ErrorCode: 0
}
----

=== Comments

NOTE: By default, the Operator must support new Alert Wallet Callback Notifications, and if the Operator has no specific logic to handle these cases, the Operator should just log the request and return Succes.

==== UK Codes

[options="header", cols="^.<20m,.<10m,.<10m,.<50"]
|===
| Gaming Regulator Code
| Type
| Method
| Description

| GB
| ResponsibleGaming
| Reset
| Alert Wallet Callback Notifications that the Player clicked Continue on the Gameflex generated UK Reality Check Dialog to reset the timer and continue game play.

| GB
| ResponsibleGaming
| Close
| Alert Wallet Callback Notifications that the Player clicked Close on the Gameflex generated UK Reality Check Dialog to close the Game and end the timer.

|===
