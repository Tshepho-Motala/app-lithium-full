<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css"/>
	<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
	<script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
	<script src="https://cdn.safecharge.com/safecharge_resources/v1/websdk/safecharge.js"></script>


	<style type="text/css">
		label {
			width: 100%;
		}
		.input-field label {
			font-size: 0.8rem;
			-webkit-transform: translateY(-140%);
			-moz-transform: translateY(-140%);
			-ms-transform: translateY(-140%);
			-o-transform: translateY(-140%);
			transform: translateY(-140%);
		}
		input[type='number'] {
			-moz-appearance:textfield;
		}

		input::-webkit-outer-spin-button,
		input::-webkit-inner-spin-button {
			-webkit-appearance: none;
		}
	</style>
</head>

<body style="font-family: 'Roboto', sans-serif;" class="grey lighten-3">
<div id="main" style="width: 100vw; height: 100vh; display: flex; flex-direction: column; justify-content: space-between; align-items: center;">

	<div></div>

	<div class="container">

		<div class="hide" id="viewIframe" style="display: flex; flex-direction: column; align-items: center;">
			<div id="loading" style="display: flex; flex-direction: column; align-items: center">
				<span><i class="fa fa-circle-o-notch fa-spin" style="font-size:72px"></i></span>
			</div>
		</div>

		<div class="card" id="viewInput">
			<div class="card-content">
				<span class="card-title">Nuvei deposit</span>
				<br/>
				<form id="payment-form" action="/service-cashier-frontend-nuvei-cc/deposit/do" method="POST">
					<br/>
					<p>Card details</p>
					<br/>
					<div class="row">
						<div class="col s10 m5">
							<label for="processorAccountId">Select stored card.</label>
							<select name="proccesorAccountId" id="processorAccountId" style="display: block;">
								<option th:each="acc : ${model.getProcessorAccounts()}" th:value="${acc.id}" th:text="${acc.descriptor}">
								</option>
							</select>
						</div>

					</div>
					<div class="row">
						<div class="input-field col s10 m5">
							<input placeholder="amount" id="amount" name="amount" class="validate" value="100"/>
							<label for="amount">Amount</label>
						</div>
						<div class="col s10 m3">
							<label for="cardCVC">CVV</label>
							<input type="number" name="cvv" id="cardCVC"
								   oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
								   pattern="^[0-9]{3}$"
								   maxlength = "3"></input>
						</div>
					</div>
					<input id="javaEnabled" name="javaEnabled" type="hidden"/>
					<input id="javaScriptEnabled" name="javaScriptEnabled" type="hidden"/>
					<input id="colorDepth" name="colorDepth" type="hidden"/>
					<input id="screenHeight" name="screenHeight" type="hidden"/>
					<input id="screenWidth" name="screenWidth" type="hidden"/>
					<input id="timeZone" name="timeZone" type="hidden"/>
				</form>
				<div class="input-field col s12">
					<button onclick="main()">Submit</button>
				</div>
			</div>
		</div>

	</div>
	<div></div>

</div>

<script th:inline="javascript">
	//<![CDATA[
	var $form = $('#payment-form');

	this.main = function() {
		$form.find('#javaEnabled').val(window.navigator.javaEnabled());
		$form.find('#javaScriptEnabled').val("true");
		$form.find('#colorDepth').val(screen.colorDepth);
		$form.find('#screenHeight').val(screen.height);
		$form.find('#screenWidth').val(screen.width);
		var date = new Date();
		$form.find('#timeZone').val(date.getTimezoneOffset());
		$form.submit();
	}

	//]]>
</script>

</body>
</html>
